<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap.min.css}"/>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<body>
<div class="container">
    <div class="main-body">

        <!-- Breadcrumb -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Task Manager</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="/">Home</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- /Breadcrumb -->

        <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                            <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin"
                                 class="rounded-circle" width="150">
                            <div class="mt-3">
                                <h4 th:text="${employee.firstName} + ' ' + ${employee.lastName}"></h4>
                                <p class="text-secondary mb-1" th:text="${employee.role}"></p>
                                <p class="text-muted font-size-sm" th:text="${employee.address}"></p>
                                <div class="row">
                                    <button type="button" class="btn btn-info btn-block" data-toggle="modal"
                                            data-target="#myModal1">Edit Info
                                    </button>
                                    <button type="button" class="btn btn-info btn-block" style="background-color: red"
                                            data-toggle="modal"
                                            data-target="#myModal2">Delete user
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mt-3">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z"/>
                                </svg>
                                E-Mail
                            </h6>
                            <span class="text-secondary" th:text="${employee.email}"></span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="feather feather-github mr-2 icon-inline">
                                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                                </svg>
                                Github
                            </h6>
                            <span class="text-secondary">bootdey</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M23 5v13.883l-1 .117v-16c-3.895.119-7.505.762-10.002 2.316-2.496-1.554-6.102-2.197-9.998-2.316v16l-1-.117v-13.883h-1v15h9.057c1.479 0 1.641 1 2.941 1 1.304 0 1.461-1 2.942-1h9.06v-15h-1zm-12 13.645c-1.946-.772-4.137-1.269-7-1.484v-12.051c2.352.197 4.996.675 7 1.922v11.613zm9-1.484c-2.863.215-5.054.712-7 1.484v-11.613c2.004-1.247 4.648-1.725 7-1.922v12.051z"/>
                                </svg>
                                BluePages
                            </h6>
                            <span class="text-secondary">@bootdey</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">

                                <h6 class="mb-0">Full Name</h6>

                            </div>
                            <div class="col-sm-9 text-secondary"
                                 th:text="${employee.firstName} + ' ' + ${employee.lastName}">
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Username</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" th:text="${employee.credential.username}">
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Phone</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" th:text="${employee.phone}">
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Role</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" th:text="${employee.role}">
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Address</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" th:text="${employee.address}">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">


                            <div class="main-box no-header clearfix">
                                <div class="main-box-body clearfix">
                                    <div class="table-responsive">
                                        <table class="table user-list">

                                            <thead>
                                            <tr>
                                                <th class="text-center"><span>Task Name</span></th>
                                                <th class="text-center"><span>Task Status</span></th>
                                                <th class="text-center"><span>Task Deadline</span></th>
                                            </tr>
                                            </thead>

                                            <tbody>
                                            <tr>

                                            <tr th:each="task : ${tasks}">

                                            <span class="user-subhead">
                                                <td class="text-center" th:text="${task.name}"></td>
                                            </span>

                                                <td class="text-center" th:text="${task.status}"></td>
                                                <td class="text-center" th:text="${task.deadline}"></td>
                                                <td style="width: 20%;">
                                                    <p>
                                                        <button type="button" class="btn btn-default btn-sm"
                                                                th:onclick="|window.location.href='/user/${employee.id}/${task.id}/removeTask'|"
                                                                data-toggle="modal" data-target="#myModal3">
                                                            Delete
                                                        </button>

                                                        <button type="button" class="btn btn-default btn-sm"
                                                                th:onclick="|window.location.href='/task/${task.id}'|">
                                                            <span class="glyphicon glyphicon-edit"></span> Edit
                                                        </button>
                                                    </p>
                                                </td>
                                            </tr>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>


                            </div>

                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
</div>

<script>
function editUserFunction() {
    document.getElementById("editUserForm").submit();
}

function deleteUserFunction() {
    document.getElementById("deleteUserForm").submit();
}
</script>

<!-- pop up edit employee -->
<div class="modal fade" id="myModal1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Edit Info</h4>
            </div>
            <div class="modal-body">
                <form id="editUserForm" th:method="put" th:object="${employee}"
                      th:action="@{/user/{idm}/updateUser(idm=${employee.idm})}">

                    <div class="row">
                        <div class="form-group col-6">
                            <label for="firstName" class="col-form-label">First name:</label>
                            <input name="firstName" type="text" class="form-control" id="firstName"
                                   th:value="${employee.firstName}">
                        </div>

                        <div class="form-group col-6">
                            <label for="lastName" class="col-form-label">Last name:</label>
                            <input name="lastName" type="text" class="form-control" id="lastName" th:value="${employee.lastName}">
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-6">
                            <label for="email" class="col-form-label">Email:</label>
                            <input name="email" type="text" class="form-control" id="email" th:value="${employee.email}">
                        </div>

                        <div class="form-group col-6">
                            <label for="phone" class="col-form-label">Phone:</label>
                            <input name="phone" type="text" class="form-control" id="phone" th:value="${employee.phone}">
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-6">
                            <label for="address" class="col-form-label">Address:</label>
                            <input name="address" type="text" class="form-control" id="address"
                                   th:value="${employee.address}">
                        </div>

                        <div class="form-group col-6">
                            <label for="role" class="col-form-label">Role:</label>
                            <input name="role" type="text" class="form-control" id="role" th:value="${employee.role}">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button onclick="editUserFunction()" class="btn btn-default" data-dismiss="modal">Edit Info</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>

                </form>
            </div>
        </div>

    </div>
</div>

<!-- pop up delete employee -->
<div class="modal fade" id="myModal2" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Account</h4>
            </div>
            <div class="modal-body">
                <form id="deleteUserForm" th:method="delete" th:object="${employee}"
                      th:action="@{/user/{idm}/deleteUser(idm=${employee.idm})}">

                    <div class="form-group">
                        <h5>Are you sure you want to delete this account?</h5>
                    </div>

                    <div class="modal-footer">
                        <button onclick="deleteUserFunction()" class="btn btn-default" data-dismiss="modal">Yes</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="myModal3" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete task</h4>
            </div>
            <div class="modal-body">
                <form>

                    <div class="form-group">
                        <h5>Are you sure you want to remove this task?</h5>
                    </div>

                    <div class="modal-footer">
                        <button onclick="" class="btn btn-default" data-dismiss="modal">Yes</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>

</body>

<script th:src="@{/bootstrap/js/bootstrap.min.js}"/>
</html>